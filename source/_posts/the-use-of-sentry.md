---
title: Sentryå‰ç«¯/APPæ—¥å¿—ç›‘æ§çš„ä½¿ç”¨
author: Zhenggl
date: 2022-02-14 14:23:28
categories:
    - [å‰ç«¯,æ—¥å¿—ç›‘æ§]
tags:
    - å‰ç«¯
    - æ—¥å¿—ç›‘æ§
cover_picture: sentry-cover.jpeg
---

### å‰è¨€
ä¸ºæé«˜å‰ç«¯å¿«é€Ÿå®šä½çº¿ä¸Šé—®é¢˜ï¼Œå‡å°‘è·Ÿç”¨æˆ·/æµ‹è¯•æ‹¿è´¦å·+å¯†ç è¿›è¡Œbugçš„é‡ç°ï¼Œè¿™è¾¹åˆ©ç”¨Sentryæ¥æ­å»ºäº†å†…éƒ¨çš„ä¸€å¥—æ—¥å¿—ç›‘æ§ç³»ç»Ÿï¼Œç›®å‰å¯ä»¥æ»¡è¶³äºAPP + WEB/H5ç«¯ + å°ç¨‹åºçš„ä¸€ä¸ªæ—¥å¿—ç›‘æ§æœåŠ¡ï¼Œ
è®°å½•çº¿ä¸Šç¨‹åºè„šæœ¬å¼‚å¸¸ï¼Œé€šè¿‡æ”¶é›†æµè§ˆå™¨ç›¸å…³ä¿¡æ¯ç¯å¢ƒï¼Œä¸”é’ˆå¯¹ä¸šåŠ¡æ–¹é¢çš„å¼‚å¸¸è¿›è¡Œæ•°æ®çš„é‡‡é›†ï¼Œå¹¶æäº¤åˆ°æ—¥å¿—æœåŠ¡å™¨ä¸­ï¼Œæä¾›é‚®ç®±å‘Šè­¦æœºåˆ¶ï¼Œä¸»åŠ¨å¿«é€Ÿå“åº”å¤„ç†çº¿ä¸Šé—®é¢˜ï¼Œä¿è¯çº¿ä¸Šé—®é¢˜çš„æ­£å¸¸è¿ä½œã€‚
### ä¸€ã€é¡¹ç›®æ¥å…¥(Vue)
*ç”±äºç›®å‰çš„é¡¹ç›®å¤§éƒ½ä½¿ç”¨çš„vueå¼€å‘æ¡†æ¶ï¼Œå› æ­¤è¿™è¾¹å‰ç«¯æš‚æ—¶ä»…æä¾›vueçš„ä½¿ç”¨*
1. å®‰è£…ä¾èµ–
```shell script
  npm install --save @sentry/vue @sentry/tracing
```

2. å…¥å£æ–‡ä»¶`main.js`çš„å¼•å…¥
```javascript
  import * as Sentry from '@sentry/vue';
  import { Integrations } from '@sentry/tracing';
  // ç„¶åæ˜¯æ—¥å¿—æœåŠ¡çš„åˆå§‹åŒ–
  Sentry.init({
      Vue,
      dsn: "http://6ce276ed6d5f43bea71464a0efee522a@192.168.199.25:9000/2",
      integrations: [
        new Integrations.BrowserTracing({
          routingInstrumentation: Sentry.vueRouterInstrumentation(router),    // routerä¸ºå½“å‰SPAçš„è·¯ç”±
          tracingOrigins: ["localhost", "my-site-url.com", /^\//]   //my-site-urlä¸ºapiæ¥å£æœåŠ¡çš„åœ°å€ï¼Œç”¨äºè·Ÿè¸ªapi
        })
      ],
      tracesSampleRate: 1.0
  });
```
### äºŒã€ä¸šåŠ¡/è‡ªå®šä¹‰å¼‚å¸¸æ±‡æŠ¥
å¯¹äºä¸šåŠ¡æ–¹é¢çš„å¼‚å¸¸ï¼Œä¸€èˆ¬éœ€è¦æä¾›å‘ç”Ÿé”™è¯¯ä¿¡æ¯çš„æ‰€æœ‰ç›¸å…³æ“ä½œï¼Œæ¯”å¦‚æ¥å£åœ°å€ï¼Œæ¥å£å‚æ•°ï¼Œå½“å‰ç”¨æˆ·çŠ¶æ€ç­‰ç­‰ï¼Œå› æ­¤éœ€è¦ä¸šåŠ¡è‡ªè¡Œå°†äº§ç”Ÿè¿™ä¸ªä¸šåŠ¡å¼‚å¸¸çš„å½“å‰ä¿¡æ¯å…¨éƒ¨æäº¤åˆ°æ—¥å¿—æœåŠ¡å™¨ä¸­ï¼Œæ¥å®Œæˆè¿œç¨‹bugçš„ä¸€ä¸ªå¤ç°ï¼Œ
è¿™è¾¹å¯ä»¥æä¾›1âƒ£ï¸å…¬å…±çš„æ–¹æ³•ï¼Œé›†æˆåˆ°å½“å‰çš„ç»„ä»¶åº“çš„æ–¹æ³•åº“ä¸­ï¼Œæ¯”å¦‚ğŸˆ¶ï¸ä»¥ä¸‹çš„ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼š
```javascript
  // æ¯”å¦‚åœ¨axiosçš„ç»Ÿä¸€ç½‘ç»œè¯·æ±‚å“åº”å›è°ƒå¤„ç†å‡½æ•°ä¸­
  import { BugReport } from 'XXX';
  BugReport.report({
    env: 'product/development/test',  //å½“å‰ç¯å¢ƒ
    errorMsg: ''
  });
```

