---
title: åœ¨ä½ çš„é¡¹ç›®ä»£ç å±‚é¢ä¸­åŠ å…¥gitæäº¤ä»£ç çš„è§„èŒƒ
author: Zhenggl
date: 2021-05-16 16:34:03
categories:
    -[ç¼–ç è§„èŒƒ, git]
tags:
    - å·¥å…·
    - git
cover_picture : https://img.91temaichang.com/blog/add-git-commit-template-rule-in-project.png
---
### å‰è¨€
å¤§å®¶åœ¨æ—¥å¸¸çš„codingç”Ÿæ´»ä¸­ï¼Œä¸å…éœ€è¦æäº¤ä»£ç ï¼Œç„¶åæ¯æ¬¡ä»£ç commitçš„messageï¼Œæ˜¯å¦æœ‰è®¤çœŸåœ°æè¿°è¿‡å‘¢ï¼Ÿ

æˆ‘æƒ³ä¸å°‘ç«¥é‹åº”è¯¥æ˜¯ç›´æ¥éšä¾¿ç¼–å†™ç‚¹ç®€å•çš„æè¿°å†…å®¹å°±ç›´æ¥æäº¤ä¸Šå»äº†ï¼Œä½†æ˜¯ï¼Œè¦æ˜¯é‡åˆ°ä¸‹å›¾è¿™ä¸ªæƒ…å†µï¼š

![éšä¾¿æäº¤çš„git commit message](https://img.91temaichang.com/blog/git-commit-without-correct-msg.png)

ä½œä¸ºé¡¹ç›®ç®¡ç†å‘˜ï¼Œåœ¨åšè¿™ä¸ªä»£ç çš„code reviewingçš„æ—¶å€™ï¼Œè¦çœ‹æ¯æ¬¡æäº¤çš„ä»£ç å…·ä½“éƒ½æ˜¯åšäº†ä»€ä¹ˆäº‹æƒ…çš„æ—¶å€™ï¼Œä¼°è®¡å¿ƒé‡Œä¼šæœ‰ä¸€é¡¿Få¼€å¤´çš„è¯è¯­ã€‚

é‚£ä¹ˆä½œä¸ºä¸€ä¸ªé¡¹ç›®çš„è´Ÿè´£äººï¼Œæœ‰å¿…è¦å¯¹å¼€å‘äººå‘˜æ¯æ¬¡æäº¤çš„messageè¿›è¡Œç»´æŠ¤ï¼Œä¸åŒçš„å¼€å‘äººå‘˜å¯¹æ¯æ¬¡commitçš„æè¿°éƒ½æœ‰ä¸åŒçš„æ ¼å¼ã€‚

æ ¹æ®ä¸šç•Œå¼€å‘äººå‘˜æ•´ç†äº†å…³äºè¿™ä¸ªcommitçš„è§„èŒƒï¼Œä¸”åœ¨ç›¸å…³çš„IDEå¼€å‘å·¥å…·ä¸­æä¾›çš„ç›¸å…³çš„æ’ä»¶

![gitæäº¤è§„èŒƒ](https://img.91temaichang.com/blog/git-commit-template.png)

ä¾›æˆ‘ä»¬æ–¹ä¾¿çš„ä½¿ç”¨ã€‚

é˜²èŒƒäºæœªç„¶ï¼Œæˆ‘ä»¬æ€»ä¸èƒ½åœ¨æ¯ä¸ªé¡¹ç›®çš„å„ä¸ªé˜¶æ®µæ¥è·Ÿè¿›åˆ°ä»£ç æäº¤çš„è§„èŒƒï¼Œæ›´åº”è¯¥è®©æ¯ä¸ªå¼€å‘äººå‘˜åœ¨æäº¤ä»£ç çš„æ—¶å€™éƒ½æœ‰è¿™ä¸ªæ„è¯†ã€‚

é’ˆå¯¹ğŸ‘†è¿™ä¸ªæƒ…å†µï¼Œå¯¹äºwebå‰ç«¯é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›ä¸€ç®€å•çš„å·¥å…·ï¼Œåœ¨æ¯ä¸ªå¼€å‘äººå‘˜åœ¨æäº¤ä»£ç çš„æ—¶å€™ï¼Œè‡ªåŠ¨æ‹¦æˆªä¸ç¬¦åˆè§„èŒƒçš„git commit messageã€‚

### validate-commit-message æ’ä»¶å·¥å…·çš„ä½¿ç”¨

#### validate-commit-messageçš„å®‰è£…
```shell script
  npm install validate-commit-message --save-dev
```
å®‰è£…å¥½å¯¹åº”çš„ä¾èµ–åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨`package.json`æ–‡ä»¶scriptsä¸­åŠ å…¥
```json
  {
    "scripts": {
        "init": "validate-commit-msg"
    }
  }
```
è¿™æ ·å­ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ‰§è¡Œè„šæœ¬
```shell script
  npm run init
```
é€šè¿‡ä¸Šé¢è¿™ä¸ªæŒ‡ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥æ¥æ ¡éªŒæ¯æ¬¡æäº¤çš„messageæ˜¯å¦ç¬¦åˆè§„èŒƒ

#### æ›´åŠ "æ‡’"çš„æ–¹å¼æ¥è§„èŒƒæ¯ä¸ªå¼€å‘äººå‘˜æäº¤çš„messageè§„èŒƒ
æˆ‘ä»¬æƒ³è¦åœ¨ä¸å½±å“æ¯ä¸ªå¼€å‘äººå‘˜çš„æ­£å¸¸ç¼–ç ï¼Œæ­£å¸¸æäº¤ä»£ç å·¥ä½œçš„å‰æä¸‹ï¼Œåˆ‡å…¥æˆ‘ä»¬çš„gitæäº¤ä»£ç messageè§„èŒƒã€‚

åœ¨`package.json`æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ª`config`çš„å±æ€§ï¼Œå…¶ä¸­æœ‰ä¸€å±æ€§`ghooks`ï¼Œé€šè¿‡åœ¨å®ƒçš„ä¸‹é¢æä¾›å¯¹åº”çš„è¿™ä¸ª`commit-msg`: `validate-commit-msg`
å±æ€§ï¼Œå°±å¯ä»¥é€šè¿‡é’©å­(hook)çš„æŠ€æœ¯ï¼Œæ‹¦æˆªåˆ°è¿™ä¸ªæ¯æ¬¡å¼€å‘äººå‘˜æäº¤çš„å†…å®¹ï¼Œå¹¶åœ¨ä¸ç¬¦åˆçš„æ—¶å€™ï¼Œç¦æ­¢æäº¤ä»£ç ã€‚

æ ¹æ®`validate-commit-msg`æ’ä»¶çš„å®˜æ–¹æ–‡æ¡£æè¿°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä¸­çš„`package.json`ä¸­æˆ–è€…æ˜¯åœ¨é¡¹ç›®ä¸­æ–°å¢ä¸€æ–‡ä»¶åä¸ºï¼š`.vcmrc`çš„é…ç½®æ–‡ä»¶ï¼Œ
åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¸€ä¸‹é…ç½®çš„ç¼–å†™ã€‚
```json
  {
  "types": ["feat", "fix", "docs", "style", "refactor", "perf", "test", "build", "ci", "chore", "revert"],
  "scope": {
    "required": true,
    "allowed": ["*"],
    "validate": true,
    "multiple": true
  },
  "warnOnFail": false,
  "maxSubjectLength": 100,
  "subjectPattern": ".+",
  "subjectPatternErrorMsg": "subject does not match subject pattern!",
  "helpMessage": "",
  "autoFix": false
}
```
å¯¹äºä¸Šè¿°é…ç½®çš„æ–‡æ¡£è¯´æ˜ï¼Œå¯è§å®˜æ–¹æ–‡æ¡£ä¸Šçš„[æè¿°](https://github.com/conventional-changelog-archived-repos/validate-commit-msg)ï¼Œ

è¿™æ ·å­ï¼Œä¸€æ—¦æˆ‘ä»¬æ‰§è¡Œçš„ä¸ç¬¦åˆ`git commit template`çš„æäº¤çš„æ—¶å€™ï¼Œideå°±ä¼šè‡ªåŠ¨ç¦æ­¢æäº¤ï¼Œå¹¶æç¤ºå¯¹åº”çš„å†…å®¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![å¼‚å¸¸çš„commitæäº¤è§„èŒƒ](https://img.91temaichang.com/blog/commot-error.png)

å¿…é¡»åœ¨ä¿®æ”¹ä¸ºæ­£ç¡®çš„git commit messageä¹‹åï¼Œæ‰å¯ä»¥æ­£å¸¸æäº¤ä»£ç ã€‚
