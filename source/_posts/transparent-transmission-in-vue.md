---
title: vueä¸­å…³äºç»„ä»¶çš„é€ä¼ æœºåˆ¶
description: vueä¸­å…³äºç»„ä»¶çš„é€ä¼ æœºåˆ¶
author: Zhenggl
date: 2022-03-28 08:01:19
categories:
    - [vue, æŠ€å·§]
tags:
    - vue
    - ç¼–ç¨‹æŠ€å·§
cover_picture: vueä¸­çš„é€ä¼ æœºåˆ¶å°é¢.jpeg
---

### éœ€æ±‚èƒŒæ™¯
> å¹³æ—¶åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦é’ˆå¯¹ä¸€äº›ä¸‰æ–¹UIåº“è¿›è¡Œå®šåˆ¶ï¼Œæƒ³è¦ä½¿ç”¨ä¸‰æ–¹åº“çš„æŸä¸ªæ§ä»¶ï¼Œç„¶åæƒ³åœ¨å®ƒçš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œä¸€äº›è‡ªæœ‰çš„é€»è¾‘çš„è¿½åŠ ï¼Œå˜æˆè‡ªå·±å›¢é˜Ÿå†…éƒ¨ä½¿ç”¨çš„æ§ä»¶ã€‚
> è¾¾åˆ°æ—¢ä½¿ç”¨åˆ°ä¸‰æ–¹åº“åŸæœ¬æä¾›çš„å±æ€§/æ–¹æ³•ï¼Œåˆèƒ½å¤Ÿä½¿ç”¨è‡ªå·±é¢å¤–è¿½åŠ çš„å±æ€§/æ–¹æ³•ã€‚

### ç›®æ ‡
ä½¿ç”¨ä¸‰æ–¹æ§ä»¶çš„åŒæ—¶ï¼Œåˆèƒ½å¤Ÿè¡¥å……ä¸Šè‡ªå·±çš„æ§ä»¶é¢å¤–çš„å±æ€§/æ–¹æ³•

### æ–¹æ¡ˆè®¾è®¡
> å®˜æ–¹æä¾›äº†ä¸€ä¸ªvueé€‰é¡¹å±æ€§ï¼šinheritAttrsï¼Œå¯¹äºå®ƒçš„ä¸€ä¸ªè§£é‡Šæ˜¯ï¼šé»˜è®¤æƒ…å†µä¸‹çˆ¶ä½œç”¨åŸŸçš„ä¸è¢«è®¤ä½œpropsçš„attributeç»‘å®šå°†ä¼š"å›é€€"ä¸”ä½œä¸ºæ™®é€šçš„HTML attributeåº”ç”¨åœ¨å­ç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šã€‚
> å½“æ’°å†™åŒ…è£¹ä¸€ä¸ªç›®æ ‡å…ƒç´ æˆ–å¦ä¸€ä¸ªç»„ä»¶çš„ç»„ä»¶æ—¶ï¼Œè¿™å¯èƒ½ä¸ä¼šæ€»æ˜¯ç¬¦åˆé¢„æœŸè¡Œä¸ºã€‚é€šè¿‡è®¾ç½®inheritAttrsä¸ºfalseï¼Œè¿™äº›é»˜è®¤è¡Œä¸ºå°†ä¼šå»æ‰ã€‚
> è€Œé€šè¿‡å®ä¾‹å±æ€§$attrså¯ä»¥è®©è¿™äº›attributeç”Ÿæ•ˆï¼Œä¸”å¯ä»¥é€šè¿‡`v-bind`æ˜¾å¼åœ°ç»‘å®šåˆ°éæ ¹å…ƒç´ ä¸Šã€‚

![èŠ‚ç‚¹å±æ€§ç¤ºä¾‹ä»£ç ](èŠ‚ç‚¹å±æ€§ç¤ºä¾‹ä»£ç .png)

![èŠ‚ç‚¹å±æ€§è¾“å‡ºç»“æœ](èŠ‚ç‚¹å±æ€§è¾“å‡ºç»“æœ.png)

ğŸ¤” å•¥æ„æ€å‘¢ï¼Ÿå°±æ˜¯è¯´å¹³æ—¶æˆ‘ä»¬æ™®é€šç¼–å†™çš„vueç»„ä»¶ä¸­ï¼Œå¦‚æœè¯¥ç»„ä»¶çš„å¹¶æ— å®šä¹‰ä»»ä½•çš„è‡ªå®šä¹‰å±æ€§propsçš„æ—¶å€™ï¼Œä¸æ­¤åŒæ—¶ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥å¾€è¿™ä¸ªè‡ªå®šä¹‰å±æ€§ä¸Šæ·»åŠ å±æ€§attributeæ—¶ï¼Œå°†ä¼šä½œä¸ºæ™®é€šçš„æœªè¢«
htmlè¯†åˆ«çš„htmlèŠ‚ç‚¹å±æ€§åŠ å…¥åˆ°domä¸­ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ç»„ä»¶çš„inheritAttrs=falseï¼Œè®©æ ¹èŠ‚ç‚¹ä¸è¯†åˆ«è¿™ä¸ªè‡ªå®šä¹‰å±æ€§ï¼Œè€Œæ˜¯ä¼ é€åˆ°å…¶å­©å­èŠ‚ç‚¹ä¸­ã€‚

### å…³é”®åŸç† + å®ç°ä»£ç 
âœ¨ inheritAttrs + vm.$attrs + vm.$listener

ä¸€ä¸ªç»„ä»¶ä¸€æ—¦è¢«é…ç½®äº†è¿™ä¸ªinheritAttrs=falseçš„æ—¶å€™ï¼Œåˆ™æœ¬èº«å°†ä¸ä¼šæ¥æ”¶åˆ°æœªå®šä¹‰çš„attributeå±æ€§åœ¨htmlèŠ‚ç‚¹ä¸­ï¼Œå¦‚ä¸‹å›¾ï¼š
![å®šä¹‰äº†inheritAttrsä¸ºfalse](å®šä¹‰äº†inheritAttrsä¸ºfalse.png)

ğŸ¤” é‚£ä¹ˆï¼Œæˆ‘æƒ³è¦è®©å­ç»„ä»¶æ¥æ”¶åˆ°ç©¿é€ä¼ é€’è¿›æ¥çš„å±æ€§ï¼Œåº”å½“åˆ©ç”¨$attrså¦‚ä½•æ¥æ“ä½œå‘¢ï¼Ÿ
![æ•è·å¹¶é€ä¼ å±æ€§](æ•è·å¹¶é€ä¼ å±æ€§.png)

ğŸ¤” å¦‚æœæˆ‘ä»¬ä¹Ÿæƒ³å°†ç‚¹å‡»äº‹ä»¶ä¹Ÿä¸€åŒç©¿é€ä¼ é€’è¿‡å»å‘¢ï¼Ÿ
ğŸ‘‰ è¿™é‡Œå¯ä»¥æ˜¯ä½¿ç”¨vm.$listenerå®ä¾‹å±æ€§æ¥å®ç°
> å®˜æ–¹å¯¹äºvm.$listenerçš„ä¸€ä¸ªè§£é‡Šæ˜¯ï¼šåŒ…å«äº†çˆ¶ä½œç”¨äºä¸­çš„(ä¸å«.nativeä¿®å¤å™¨çš„)v-onäº‹ä»¶ç›‘å¬å™¨ï¼Œå®ƒå¯ä»¥é€šè¿‡v-on="$listener"ä¼ å…¥å†…éƒ¨ç»„ä»¶--åœ¨åˆ›å»ºæ›´é«˜å±‚æ¬¡çš„ç»„ä»¶æ—¶éå¸¸æœ‰ç”¨ã€‚

ğŸ¤” å•¥æ„æ€å‘¢ï¼Ÿ
ğŸ‘‰ å°±æ˜¯é€šè¿‡å°†è‡ªå®šä¹‰çš„äº‹ä»¶ç›‘å¬å¯ä»¥é€šè¿‡`vm.$listener`é€šè¿‡`v-on`æŒ‡ä»¤ç©¿é€ä¼ é€’ç»™å­ç»„ä»¶
![ç©¿é€$listener](ç©¿é€$listener.png)

è€ŒåŸæœ¬çˆ¶ç»„ä»¶è‡ªèº«æ‰€å®šä¹‰çš„å±æ€§åˆ™å¯ä»¥æ­£å¸¸ç›´æ¥ä½¿ç”¨ï¼Œå®Œæ•´çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```vue
<!-- çˆ¶ç»„ä»¶Parent.vue -->
<template>
  <div>
    {{ yy }}
    <child v-bind="$attrs" v-on="$listeners" />
  </div>
</template>

<script>
import Child from './Child';
export default {
  name: 'Parent',
  inheritAttrs: false,
  data() {
    return {}
  },
  components: {
    Child
  },
  props: {
    yy: {
      type: 'String',
      default: ''
    }
  },
}
</script>
```

```vue
  <!-- å­©å­ç»„ä»¶Child.vue -->
  <template>
  <div @click="clickMe">
    å­©å­ç»„ä»¶ï¼š{{ xx }}
  </div>
</template>

<script>
export default {
  name: 'Child',
  data() {
    return {}
  },
  props: {
    xx: {
      type: 'String',
      default: ''
    }
  },
  methods: {
    clickMe(){
      this.$emit('on-click-me', this.xx);
    }
  }
}
</script>

```

```vue
<!-- ç¤ºä¾‹ä»£ç  -->
  <template>
  <div>
    <parent xx="123" @on-click-me="testClickMe" yy="456"/>
  </div>
</template>

<script>
import Parent from './components/Parent';
export default {
  name: 'App5',
  data() {
    return {}
  },
  components: {
    Parent
  },
  methods: {
    testClickMe(detail){
      alert(detail);
    }
  }
}
</script>
```

### æ€»ç»“
å°†ä¸Šè¿°ä¾‹å­ä¸­çš„Child.vueç»„ä»¶ï¼Œæ›¿æ¢æˆä¸‰æ–¹åº“çš„ç»„ä»¶ï¼Œåˆ™å¯ä»¥è¾¾åˆ°å¯¹ä¸‰æ–¹çš„æ§ä»¶è¿›è¡Œè¿½åŠ è‡ªèº«çš„å±æ€§ï¼Œä½¿ç”¨ä¸‰æ–¹æ§ä»¶çš„åŒæ—¶ï¼Œä¹Ÿèƒ½å¤Ÿè¿½åŠ åˆ°è‡ªå·±çš„å±æ€§ã€‚
